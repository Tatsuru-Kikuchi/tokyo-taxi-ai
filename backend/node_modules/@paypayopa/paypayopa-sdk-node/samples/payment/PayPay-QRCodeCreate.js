'use strict';

const PAYPAY = require('../..');

const API_KEY = 'm_179353170152349696_JeNq';
const API_SECRET = '0WnAQrhWEKqmwUUEDFFhXLTBYF83d6gCNE6mAatD';

/**
 * Configure a valid authorization
 * @param {String} clientId     API_KEY for using SDK
 * @param {String} clientSecret API_SECRET for using SDK
 */
try {
  PAYPAY.Configure({
    clientId: API_KEY,
    clientSecret: API_SECRET,
  });
} catch (err) {
  console.log(err);
}

/**
 * Create a QRCode
 * Create a dynamic QR Code to receive payments
 * @callback                Callback function to handle result
 * @returns {Object}        Returns result containing STATUS and BODY
 * @param {Object} payload  JSON object payload
 */
try {
  let payload = {
    merchantPaymentId: '85C036C0-84EB-4055-B4D0-4B8B63F396BE',
    requestedAt: 1576650245,
    amount: {
      amount: 1,
      currency: 'JPY',
    },
    assumeMerchant: '0123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100',
    storeId: 'fasf',
    codeType: 'ORDER_QR',
    orderItems: [
      {
        name: 'blah',
        quantity: 1,
        unitPrice: {
          amount: 1,
          currency: 'JPY',
        },
      },
    ],
    redirectUrl: 'https://stg-www.paypay-corp.co.jp/dev-panel',
  };
  PAYPAY.QRCodeCreate(payload, (result) => {
    console.log(result);
  });
} catch (err) {
  console.log(err);
}
